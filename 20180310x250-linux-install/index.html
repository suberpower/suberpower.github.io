<!DOCTYPE html>
<html lang="en">
  
  
<script>
  "use strict";

  
  
  if (window.NodeList && !NodeList.prototype.forEach) {
    NodeList.prototype.forEach = Array.prototype.forEach;
  }

  
  if (!String.prototype.includes) {
    String.prototype.includes = function (search, start) {
      'use strict';

      if (search instanceof RegExp) {
        throw TypeError('first argument must not be a RegExp');
      }
      if (start === undefined) { start = 0; }
      return this.indexOf(search, start) !== -1;
    };
  }

  
  Document.prototype.append = Element.prototype.append = function append() {
    this.appendChild(_mutation(arguments));
  };
  function _mutation(nodes) {
    if (!nodes.length) {
      throw new Error('DOM Exception 8');
    } else if (nodes.length === 1) {
      return typeof nodes[0] === 'string' ? document.createTextNode(nodes[0]) : nodes[0];
    } else {
      var
      fragment = document.createDocumentFragment(),
      length = nodes.length,
      index = -1,
      node;

      while (++index < length) {
        node = nodes[index];

        fragment.appendChild(typeof node === 'string' ? document.createTextNode(node) : node);
      }

      return fragment;
    }
  }

  
  if (!String.prototype.startsWith) {
    String.prototype.startsWith = function (searchString, position) {
      position = position || 0;
      return this.indexOf(searchString, position) === position;
    };
  }
  


  document.addEventListener('DOMContentLoaded', function () {
    
    var navCollapseBtn = document.querySelector('.navbar__burger');
    navCollapseBtn ? navCollapseBtn.addEventListener('click', function (e) {
      var navCollapse = document.querySelector('.navbarm__collapse');

      if (navCollapse) {
        var dataOpen = navCollapse.getAttribute('data-open');

        if (dataOpen === 'true') {
          navCollapse.setAttribute('data-open', 'false');
          navCollapse.style.maxHeight = 0;
          navCollapseBtn.classList.remove('is-active');
        } else {
          navCollapse.setAttribute('data-open', 'true');
          navCollapse.style.maxHeight = navCollapse.scrollHeight + "px";
          navCollapseBtn.classList.add('is-active');
        }
      }
    }) : null;
    


    
    var tables = document.querySelectorAll('.single__contents > table');
    for (let i = 0; i < tables.length; i++) {
      var table = tables[i];
      var wrapper = document.createElement('div');
      wrapper.className = 'table-wrapper';
      table.parentElement.replaceChild(wrapper, table);
      wrapper.appendChild(table);
    }
    


    
    var footNoteRefs = document.querySelectorAll('.footnote-ref');
    var footNoteBackRefs = document.querySelectorAll('.footnote-backref');

    footNoteRefs ? 
    footNoteRefs.forEach(function(elem, idx) {
      elem.onmouseenter = function () {
        if (navbar.classList.contains('scrolling')) {
          navbar.classList.remove('scrolling');
        }
      }

      elem.onmouseleave = function () {
        if (!navbar.classList.contains('scrolling')) {
          setTimeout(function () {
            navbar.classList.add('scrolling');
          }, 100);
        }
      }

      elem.onclick = function () {
        if (!navbar.classList.contains('scrolling')) {
          navbar.classList.remove('navbar--show');
          navbar.classList.remove('navbar--hide');
          navbar.classList.add('navbar--hide');
        }
      }
    }) : null;

    footNoteBackRefs ? 
    footNoteBackRefs.forEach(function(elem, idx) {
      elem.onmouseenter = function () {
        if (navbar.classList.contains('scrolling')) {
          navbar.classList.remove('scrolling');
        }
      }

      elem.onmouseleave = function () {
        if (!navbar.classList.contains('scrolling')) {
          setTimeout(function() {
            navbar.classList.add('scrolling');
          }, 100);
        }
      }

      elem.onclick = function () {
        if (!navbar.classList.contains('scrolling')) {
          navbar.classList.remove('navbar--show');
          navbar.classList.remove('navbar--hide');
          navbar.classList.add('navbar--hide');
        }
      }
    }) : null;
    


    
    var summaryContainer = document.querySelector('.summary__container');
    var searchResult = document.querySelector('.search-result');
    var searchResultCloseBtn = document.querySelector('.search-result__close');
    searchResultCloseBtn ? searchResultCloseBtn.addEventListener('click', function (e) {
      searchResult.setAttribute('data-display', 'none');
      summaryContainer.setAttribute('data-display', 'block');
    }) : null;
    


    
    document.querySelectorAll('.tab') ? 
    document.querySelectorAll('.tab').forEach(function(elem, idx) {
      var containerId = elem.getAttribute('id');
      var containerElem = elem;
      var tabLinks = elem.querySelectorAll('.tab__link');
      var tabContents = elem.querySelectorAll('.tab__content');
      var ids = [];

      tabLinks && tabLinks.length > 0 ?
      tabLinks.forEach(function(link, index, self) {
        link.onclick = function(e) {
          for (var i = 0; i < self.length; i++) {
            if (index === parseInt(i, 10)) {
              if (!self[i].classList.contains('active')) {
                self[i].classList.add('active');
                tabContents[i].style.display = 'block';
              }
            } else {
              self[i].classList.remove('active');
              tabContents[i].style.display = 'none';
            }
          }
        }
      }) : null;
    }) : null;
    


    
    document.querySelectorAll('.codetab') ? 
    document.querySelectorAll('.codetab').forEach(function(elem, idx) {
      var containerId = elem.getAttribute('id');
      var containerElem = elem;
      var codetabLinks = elem.querySelectorAll('.codetab__link');
      var codetabContents = elem.querySelectorAll('.codetab__content');
      var ids = [];

      codetabLinks && codetabLinks.length > 0 ?
      codetabLinks.forEach(function(link, index, self) {
        link.onclick = function(e) {
          for (var i = 0; i < self.length; i++) {
            if (index === parseInt(i, 10)) {
              if (!self[i].classList.contains('active')) {
                self[i].classList.add('active');
                codetabContents[i].style.display = 'block';
              }
            } else {
              self[i].classList.remove('active');
              codetabContents[i].style.display = 'none';
            }
          }
        }
      }) : null;
    }) : null;
    


    
    var gttBtn = document.getElementById("gtt");
    gttBtn.style.display = "none";
    gttBtn.addEventListener('click', function () {
      if (window.document.documentMode) {
        document.documentElement.scrollTop = 0;
      } else {
        scrollToTop(250);
      }
    });

    function scrollToTop(scrollDuration) {
      var scrollStep = -window.scrollY / (scrollDuration / 15);
      var scrollInterval = setInterval(function () {
        if (window.scrollY != 0) {
          window.scrollBy(0, scrollStep);
        }
        else clearInterval(scrollInterval);
      }, 15);
    }

    var scrollFunction = function () {
      if (document.body.scrollTop > 250 || document.documentElement.scrollTop > 250) {
        gttBtn.style.display = "block";
      } else {
        gttBtn.style.display = "none";
      }
    }
    


    
    var expandBtn = document.querySelectorAll('.expand__button');

    for (let i = 0; i < expandBtn.length; i++) {
      expandBtn[i].addEventListener("click", function () {
        var content = this.nextElementSibling;
        if (content.style.maxHeight) {
          content.style.maxHeight = null;
          this.querySelector('svg').classList.add('expand-icon__right');
          this.querySelector('svg').classList.remove('expand-icon__down');
        } else {
          content.style.maxHeight = content.scrollHeight + "px";
          this.querySelector('svg').classList.remove('expand-icon__right');
          this.querySelector('svg').classList.add('expand-icon__down');
        }
      });
    }
    


    
    var lastScrollTop = window.pageYOffset || document.documentElement.scrollTop;
    var tocElem = document.querySelector('.toc');
    var tableOfContentsElem = tocElem ? tocElem.querySelector('#TableOfContents') : null;
    var toggleTocElem = document.getElementById('toggle-toc');
    var singleContentsElem = document.querySelector('.single__contents');
    var navbar = document.querySelector('.navbar');
    var tocFlexbox = document.querySelector('.toc__flexbox');
    var tocFlexboxOuter = document.querySelector('.toc__flexbox--outer');
    var expandContents = document.querySelectorAll('.expand__content');
    var boxContents = document.querySelectorAll('.box');
    var notAllowedTitleIds = null;

    
    var tocFolding = JSON.parse("null");
    
    var tocLevels = JSON.parse("null");
    
    if (tocLevels) {
      tocLevels = tocLevels.toString();
    } else {
      tocLevels = "h1, h2, h3, h4, h5, h6";
    }

    
    singleContentsElem && singleContentsElem.querySelectorAll(".tab") ?
    singleContentsElem.querySelectorAll(".tab").forEach(function (elem) {
      elem.querySelectorAll(tocLevels).forEach(function (element) {
        notAllowedTitleIds = Array.isArray(notAllowedTitleIds) ?
          notAllowedTitleIds.concat(element.getAttribute('id')) :
          [element.getAttribute('id')];
      });
    }) : null;

    
    expandContents ? expandContents.forEach(function(elem) {
      elem.querySelectorAll(tocLevels).forEach(function (element) {
        notAllowedTitleIds = Array.isArray(notAllowedTitleIds) ?
          notAllowedTitleIds.concat(element.getAttribute('id')) :
          [element.getAttribute('id')];
      });
    }) : null;

    
    boxContents ? boxContents.forEach(function(elem) {
      elem.querySelectorAll(tocLevels).forEach(function (element) {
        notAllowedTitleIds = Array.isArray(notAllowedTitleIds) ?
          notAllowedTitleIds.concat(element.getAttribute('id')) :
          [element.getAttribute('id')];
      });
    }) : null;

    
    window.onscroll = function () {
      scrollFunction();
      
      var st = window.pageYOffset || document.documentElement.scrollTop;
      if (st > lastScrollTop) { 
        if (st < 250) {
          gttBtn.style.display = "none";
        } else {
          gttBtn.style.display = "block";
        }

        if (st < 45) {
          return null;
        }

        if (navbar.classList.contains('scrolling')) {
          if (!navbar.classList.contains('navbar--hide')) {
            navbar.classList.add('navbar--hide');
          } else if (navbar.classList.contains('navbar--show')) {
            navbar.classList.remove('navbar--show');
          }
        }

        if (singleContentsElem) {
          if (singleContentsElem.querySelectorAll(tocLevels).length > 0) {
            singleContentsElem.querySelectorAll(tocLevels).forEach(function (elem) {
              if (toggleTocElem && !toggleTocElem.checked) {
                return null;
              }

              if (notAllowedTitleIds && notAllowedTitleIds.includes(elem.getAttribute('id'))) {
                return null;
              }
              
              if (document.documentElement.scrollTop >= elem.offsetTop) {
                if (tableOfContentsElem) {
                  var id = elem.getAttribute('id');
                  tocElem.querySelectorAll('a').forEach(function (elem) {
                    elem.classList.remove('active');
                  });
                  tocElem.querySelector('a[href="#' + id + '"]') ?
                    tocElem.querySelector('a[href="#' + id + '"]').classList.add('active') : null;

                  if (false === tocFolding) {
                    
                  } else {
                    tableOfContentsElem.querySelectorAll('ul') ?
                      tableOfContentsElem.querySelectorAll('ul').forEach(function (rootUl) {
                        rootUl.querySelectorAll('li').forEach(function (liElem) {
                          liElem.querySelectorAll('ul').forEach(function (ulElem) {
                            ulElem.style.display = 'none';
                          });
                        });
                      }) : null;
                  }

                  var curElem = tableOfContentsElem.querySelector("[href='#" + id + "']");
                  if (curElem && curElem.nextElementSibling) {
                    curElem.nextElementSibling.style.display = 'block';
                  }
                  getParents(curElem, 'ul') ?
                    getParents(curElem, 'ul').forEach(function (elem) {
                      elem.style.display = 'block';
                    }) : null;
                }
              }
            });
          } else {
            if (tocFlexbox) {
              tocFlexbox.setAttribute('data-position', '');
              if (!tocFlexbox.classList.contains('hide')) {
                tocFlexbox.classList.add('hide');
              }
            }
            if (tocFlexboxOuter) {
              tocFlexboxOuter.setAttribute('data-position', '');
              if (!tocFlexboxOuter.classList.contains('hide')) {
                tocFlexboxOuter.classList.add('hide');
              }
            }
          }
        }
      } else { 
        if (st < 250) {
          gttBtn.style.display = "none";
        }

        if (navbar.classList.contains('scrolling')) {
          if (navbar.classList.contains('navbar--hide')) {
            navbar.classList.remove('navbar--hide');
          } else if (!navbar.classList.contains('navbar--show')) {
            navbar.classList.add('navbar--show');
          }
        }

        if (singleContentsElem) {
          if (singleContentsElem.querySelectorAll(tocLevels).length > 0) {
            singleContentsElem.querySelectorAll(tocLevels).forEach(function (elem) {
              if (toggleTocElem && !toggleTocElem.checked) {
                return null;
              }
              
              if (notAllowedTitleIds && notAllowedTitleIds.includes(elem.getAttribute('id'))) {
                return null;
              }

              if (document.documentElement.scrollTop >= elem.offsetTop) {
                if (tableOfContentsElem) {
                  var id = elem.getAttribute('id');
                  tocElem.querySelectorAll('a').forEach(function (elem) {
                    elem.classList.remove('active');
                  });
                  tocElem.querySelector('a[href="#' + id + '"]') ?
                    tocElem.querySelector('a[href="#' + id + '"]').classList.add('active') : null;

                  if (false === tocFolding) {
                    
                  } else {
                    tableOfContentsElem.querySelectorAll('ul') ?
                      tableOfContentsElem.querySelectorAll('ul').forEach(function (rootUl) {
                        rootUl.querySelectorAll('li').forEach(function (liElem) {
                          liElem.querySelectorAll('ul').forEach(function (ulElem) {
                            ulElem.style.display = 'none';
                          });
                        });
                      }) : null;
                  }

                  var curElem = tableOfContentsElem.querySelector("[href='#" + id + "']");
                  if (curElem && curElem.nextElementSibling) {
                    curElem.nextElementSibling.style.display = 'block';
                  }
                  getParents(curElem, 'ul') ?
                    getParents(curElem, 'ul').forEach(function (elem) {
                      elem.style.display = 'block';
                    }) : null;
                }
              }
            });
          } else {
            if (tocFlexbox && !tocFlexbox.classList.contains('hide')) {
              tocFlexbox.classList.add('hide');
            }
            if (tocFlexboxOuter && !tocFlexboxOuter.classList.contains('hide')) {
              tocFlexboxOuter.classList.add('hide');
            }
          }
          
        }

        if (tableOfContentsElem && document.documentElement.scrollTop < 250) {
          if (false === tocFolding) {

          } else {
            tableOfContentsElem.querySelector('ul') ?
              tableOfContentsElem.querySelector('ul').querySelectorAll('li').forEach(function (liElem) {
                liElem.querySelectorAll('ul').forEach(function (ulElem) {
                  ulElem.style.display = 'none';
                });
              }) : null;
          }
        }
      }
      lastScrollTop = st <= 0 ? 0 : st;
    };
  


  
    var localTheme = localStorage.getItem('theme');
    var rootEleme = document.getElementById('root');
    var selectThemeElem = document.querySelectorAll('.select-theme');
    var selectThemeItemElem = document.querySelectorAll('.select-theme__item');
    
    
    var skinDarkCode = JSON.parse("\"\"");
    
    var skinLightCode = JSON.parse("\"\"");
    
    var skinHackerCode = JSON.parse("\"\"");
    
    var skinSolarizedCode = JSON.parse("\"\"");
    
    var skinKimbieCode = JSON.parse("\"\"");

    var setMetaColor = function(themeColor) {
      var metaMsapplicationTileColor = document.getElementsByName('msapplication-TileColor')[0];
      var metaThemeColor = document.getElementsByName('theme-color')[0];
      var metaMsapplicationNavbuttonColor = document.getElementsByName('msapplication-navbutton-color')[0];
      var metaAppleMobileWebAappStatusBarStyle = document.getElementsByName('apple-mobile-web-app-status-bar-style')[0];

      if (themeColor.includes('dark')) {
        metaMsapplicationTileColor.setAttribute('content', '#fcfcfa');
        metaThemeColor.setAttribute('content', '#403E41');
        metaMsapplicationNavbuttonColor.setAttribute('content', '#403E41');
        metaAppleMobileWebAappStatusBarStyle.setAttribute('content', '#403E41');
      } else if (themeColor.includes('light')) {
        metaMsapplicationTileColor.setAttribute('content', '#555');
        metaThemeColor.setAttribute('content', '#eee');
        metaMsapplicationNavbuttonColor.setAttribute('content', '#eee');
        metaAppleMobileWebAappStatusBarStyle.setAttribute('content', '#eee');
      } else if (themeColor.includes('hacker')) {
        metaMsapplicationTileColor.setAttribute('content', '#e3cd26');
        metaThemeColor.setAttribute('content', '#252526');
        metaMsapplicationNavbuttonColor.setAttribute('content', '#252526');
        metaAppleMobileWebAappStatusBarStyle.setAttribute('content', '#252526');
      } else if (themeColor.includes('solarized')) {
        metaMsapplicationTileColor.setAttribute('content', '#d3af86');
        metaThemeColor.setAttribute('content', '#51412c');
        metaMsapplicationNavbuttonColor.setAttribute('content', '#51412c');
        metaAppleMobileWebAappStatusBarStyle.setAttribute('content', '#51412c');
      } else if (themeColor.includes('kimbie')) {
        metaMsapplicationTileColor.setAttribute('content', '#586e75');
        metaThemeColor.setAttribute('content', '#eee8d5');
        metaMsapplicationNavbuttonColor.setAttribute('content', '#eee8d5');
        metaAppleMobileWebAappStatusBarStyle.setAttribute('content', '#eee8d5');
      }
    }

    var parseSkinCode = function(themeText) {
      if (themeText === skinDarkCode) {
        return 'dark';
      } else if (themeText === skinLightCode) {
        return 'light';
      } else if (themeText === skinHackerCode) {
        return 'hacker';
      } else if (themeText === skinSolarizedCode) {
        return 'solarized';
      } else if (themeText === skinKimbieCode) {
        return 'kimbie';
      }
    }
    
    if (localTheme) {
      selectThemeItemElem ? 
      selectThemeItemElem.forEach(function (elem) {
        if (elem.text.trim() === localTheme) {
          elem.classList.add('is-active');
        } else {
          elem.classList.remove('is-active');
        }
      }) : null;

      setMetaColor(localTheme);
    } else {
      setMetaColor(rootEleme.className);
    }

    selectThemeItemElem ? 
    selectThemeItemElem.forEach(function (v, i) {
      v.addEventListener('click', function (e) {
        var selectedThemeVariant = parseSkinCode(e.target.text.trim());
        localStorage.setItem('theme', selectedThemeVariant);
        setMetaColor(selectedThemeVariant);

        rootEleme.removeAttribute('class');
        rootEleme.classList.add('theme__' + selectedThemeVariant);
        selectThemeElem.forEach(function(rootElem) {
          rootElem.querySelectorAll('a').forEach(function (elem) {
            if (elem.classList) {
              if (elem.text.trim() === selectedThemeVariant) {
                if (!elem.classList.contains('is-active')) {
                  elem.classList.add('is-active');
                }
              } else {
                if (elem.classList.contains('is-active')) {
                  elem.classList.remove('is-active');
                }
              }
            }
          });
        });

        if (window.mermaid) {
          if (selectedThemeVariant === "dark" || selectedThemeVariant === "hacker") {
            mermaid.initialize({ theme: 'dark' });
            location.reload();
          } else {
            mermaid.initialize({ theme: 'default' });
            location.reload();
          }
        }

        var utterances = document.getElementById('utterances');
        if (utterances) {
          utterances.querySelector('iframe').contentWindow.postMessage({
            type: 'set-theme',
            theme: selectedThemeVariant === "dark" || selectedThemeVariant === "hacker" ? 'photon-dark' : selectedThemeVariant === 'kimbie' ? 'github-dark-orange' : 'github-light',
          }, 'https://utteranc.es');
        }

        var twitterCards = document.querySelectorAll('.twitter-timeline');
        if (twitterCards) {
          window.postMessage({
            type: 'set-twitter-theme',
            theme: selectedThemeVariant === 'light' || selectedThemeVariant === 'solarized' ? 'light' : 'dark',
          });
        }
      });
    }) : null;
  


  
    
    var baseurl = JSON.parse("\"https://suberpower.com\"");
    
    var permalink = JSON.parse("\"https://suberpower.com/20180310x250-linux-install/\"");
    
    var langprefix = JSON.parse("\"\"");
    var searchResults = null;
    var searchMenu = null;
    var searchText = null;
    
    
    var enableSearch = JSON.parse("null");
    
    var enableSearchHighlight = JSON.parse("null");
    
    var searchResultPosition = JSON.parse("null");
    
    var sectionType = JSON.parse("\"post\"");
    
    var kind = JSON.parse("\"page\"");
    
    var fuse = null;

    if (enableSearch) {
      (function initFuse() {
        var xhr = new XMLHttpRequest();
        if (sectionType === "publication" && kind !== "page") {
          xhr.open('GET', permalink + "index.json");
        } else {
          xhr.open('GET', baseurl + langprefix + "/index.json");
        }
        
        xhr.setRequestHeader('Content-Type', 'application/json; charset=utf-8');
        xhr.onload = function () {
          if (xhr.status === 200) {
            fuse = new Fuse(JSON.parse(xhr.response.toString('utf-8')), {
              keys: sectionType.includes('publication') ? ['title', 'abstract'] : ['title', 'description', 'content'],
              includeMatches: enableSearchHighlight,
              shouldSort: true, 
              threshold: 0.4, 
              location: 0, 
              distance: 100, 
              maxPatternLength: 32,
              minMatchCharLength: 1,
              isCaseSensitive: false, 
              findAllMatches: false, 
              useExtendedSearch: false, 
            });
            window.fuse = fuse;
          }
          else {
            console.error('[' + xhr.status + ']Error:', xhr.statusText);
          }
        };
        xhr.send();
      })();
    }

    function makeLi(ulElem, obj) {
      var li = document.createElement('li');
      li.className = 'search-result__item';
      
      var a = document.createElement('a');
      a.innerHTML = obj.item.title;
      a.setAttribute('class', 'search-result__item--title');
      a.setAttribute('href', obj.item.permalink);

      var descDiv = document.createElement('div');
      descDiv.setAttribute('class', 'search-result__item--desc');
      if (obj.item.description) {
        descDiv.innerHTML = obj.item.description;
      } else if (obj.item.content) {
        descDiv.innerHTML = obj.item.content.substring(0, 225);
      }
      
      li.appendChild(a);
      li.appendChild(descDiv);
      ulElem.appendChild(li);
    }

    function makeHighlightLi(ulElem, obj) {
      var li = document.createElement('li');
      li.className = 'search-result__item';
      var descDiv = null;

      var a = document.createElement('a');
      a.innerHTML = obj.item.title;
      a.setAttribute('class', 'search-result__item--title');
      a.setAttribute('href', obj.item.uri);

      if (obj.matches && obj.matches.length) {
        for (var i = 0; i < obj.matches.length; i++) {
          if ('title' === obj.matches[i].key) {
            a = document.createElement('a');
            a.innerHTML = generateHighlightedText(obj.matches[i].value, obj.matches[i].indices);
            a.setAttribute('class', 'search-result__item--title');
            a.setAttribute('href', obj.item.uri);
          }
          
          if ('description' === obj.matches[i].key) {
            descDiv = document.createElement('div');
            descDiv.setAttribute('class', 'search-result__item--desc');
            descDiv.innerHTML = generateHighlightedText(obj.item.description, obj.matches[i].indices);
          } else if ('content' === obj.matches[i].key) {
            if (!descDiv) {
              descDiv = document.createElement('div');
              descDiv.setAttribute('class', 'search-result__item--desc');
              descDiv.innerHTML = generateHighlightedText(obj.item.content.substring(0, 150), obj.matches[i].indices);
            }
          } else {
            if (obj.item.description) {
              descDiv = document.createElement('div');
              descDiv.setAttribute('class', 'search-result__item--desc');
              descDiv.innerHTML = obj.item.description;
            } else {
              descDiv = document.createElement('div');
              descDiv.setAttribute('class', 'search-result__item--desc');
              descDiv.innerHTML = obj.item.content.substring(0, 150);
            }
          }
        }

        li.appendChild(a);
        if (descDiv) {
          li.appendChild(descDiv);
        }
        if (li) {
          ulElem.appendChild(li);
        }
      }
    }

    function renderSearchResultsSide(searchText, results) {
      searchResults = document.getElementById('search-results');
      searchMenu = document.getElementById('search-menu');
      searchResults.setAttribute('class', 'dropdown is-active');
      
      var ul = document.createElement('ul');
      ul.setAttribute('class', 'dropdown-content search-content');

      if (results.length) {
        results.forEach(function (result) {
          var li = document.createElement('li');
          var a = document.createElement('a');
          a.setAttribute('href', result.uri);
          a.setAttribute('class', 'dropdown-item');
          a.appendChild(li);

          var titleDiv = document.createElement('div');
          titleDiv.innerHTML = result.title;
          titleDiv.setAttribute('class', 'menu-item__title');

          var descDiv = document.createElement('div');
          descDiv.setAttribute('class', 'menu-item__desc');
          if (result.description) {
            descDiv.innerHTML = result.description;
          } else if (result.content) {
            descDiv.innerHTML = result.content.substring(0, 150);
          }

          li.appendChild(titleDiv);
          li.appendChild(descDiv);
          ul.appendChild(a);
        });
      } else {
        var li = document.createElement('li');
        li.setAttribute('class', 'dropdown-item');
        li.innerText = 'No results found';
        ul.appendChild(li);
      }

      while (searchMenu.hasChildNodes()) {
        searchMenu.removeChild(
          searchMenu.lastChild
        );
      }
      
      searchMenu.appendChild(ul);
    }

    function renderSearchHighlightResultsSide(searchText, results) {
      searchResults = document.getElementById('search-results');
      searchMenu = document.getElementById('search-menu');
      searchResults.setAttribute('class', 'dropdown is-active');

      var ul = document.createElement('ul');
      ul.setAttribute('class', 'dropdown-content search-content');

      if (results.length) {
        results.forEach(function (result) {
          var li = document.createElement('li');
          var a = document.createElement('a');
          var descDiv = null;

          a.setAttribute('href', result.item.uri);
          a.setAttribute('class', 'dropdown-item');
          a.appendChild(li);

          var titleDiv = document.createElement('div');
          titleDiv.innerHTML = result.item.title;
          titleDiv.setAttribute('class', 'menu-item__title');
          
          if (result.matches && result.matches.length) {
            for (var i = 0; i < result.matches.length; i++) {
              if ('title' === result.matches[i].key) {
                titleDiv.innerHTML = generateHighlightedText(result.matches[i].value, result.matches[i].indices);
              }

              if ('description' === result.matches[i].key) {
                descDiv = document.createElement('div');
                descDiv.setAttribute('class', 'menu-item__desc');
                descDiv.innerHTML = generateHighlightedText(result.item.description, result.matches[i].indices);
              } else if ('content' === result.matches[i].key) {
                if (!descDiv) {
                  descDiv = document.createElement('div');
                  descDiv.setAttribute('class', 'menu-item__desc');
                  descDiv.innerHTML = generateHighlightedText(result.item.content.substring(0, 150), result.matches[i].indices);
                }
              } else {
                if (result.item.description) {
                  descDiv = document.createElement('div');
                  descDiv.setAttribute('class', 'menu-item__desc');
                  descDiv.innerHTML = result.item.description;
                } else {
                  descDiv = document.createElement('div');
                  descDiv.setAttribute('class', 'menu-item__desc');
                  descDiv.innerHTML = result.item.content.substring(0, 150);
                }
              }
            }
            
            li.appendChild(titleDiv);
            if (descDiv) {
              li.appendChild(descDiv);
            }
            ul.appendChild(a);
          }
        });
      } else {
        var li = document.createElement('li');
        li.setAttribute('class', 'dropdown-item');
        li.innerText = 'No results found';
        ul.appendChild(li);
      }

      while (searchMenu.hasChildNodes()) {
        searchMenu.removeChild(
          searchMenu.lastChild
        );
      }
      searchMenu.appendChild(ul);
    }

    function renderSearchResultsMobile(searchText, results) {
      searchResults = document.getElementById('search-mobile-results');

      var content = document.createElement('div');
      content.setAttribute('class', 'mobile-search__content');

      if (results.length > 0) {
        results.forEach(function (result) {
          var item = document.createElement('a');
          item.setAttribute('href', result.uri);
          item.innerHTML = '<div class="mobile-search__item"><div class="mobile-search__item--title">📄 ' + result.title + '</div><div class="mobile-search__item--desc">' + (result.description ? result.description : result.content) + '</div></div>';
          content.appendChild(item);
        });
      } else {
        var item = document.createElement('span');
        content.appendChild(item);
      }

      let wrap = document.getElementById('search-mobile-results');
      while (wrap.firstChild) {
        wrap.removeChild(wrap.firstChild)
      }
      searchResults.appendChild(content);      
    }

    function renderSearchHighlightResultsMobile(searchText, results) {
      searchResults = document.getElementById('search-mobile-results');

      var ul = document.createElement('div');
      ul.setAttribute('class', 'mobile-search__content');

      if (results.length) {
        results.forEach(function (result) {
          var li = document.createElement('li');
          var a = document.createElement('a');
          var descDiv = null;

          a.setAttribute('href', result.item.uri);
          a.appendChild(li);
          li.setAttribute('class', 'mobile-search__item');

          var titleDiv = document.createElement('div');
          titleDiv.innerHTML = result.item.title;
          titleDiv.setAttribute('class', 'mobile-search__item--title');
          
          if (result.matches && result.matches.length) {
            for (var i = 0; i < result.matches.length; i++) {
              if ('title' === result.matches[i].key) {
                titleDiv.innerHTML = generateHighlightedText(result.matches[i].value, result.matches[i].indices);
              }

              if ('description' === result.matches[i].key) {
                descDiv = document.createElement('div');
                descDiv.setAttribute('class', 'mobile-search__item--desc');
                descDiv.innerHTML = generateHighlightedText(result.item.description, result.matches[i].indices);
              } else if ('content' === result.matches[i].key) {
                if (!descDiv) {
                  descDiv = document.createElement('div');
                  descDiv.setAttribute('class', 'mobile-search__item--desc');
                  descDiv.innerHTML = generateHighlightedText(result.item.content.substring(0, 150), result.matches[i].indices);
                }
              } else {
                if (result.item.description) {
                  descDiv = document.createElement('div');
                  descDiv.setAttribute('class', 'mobile-search__item--desc');
                  descDiv.innerHTML = result.item.description;
                } else {
                  descDiv = document.createElement('div');
                  descDiv.setAttribute('class', 'mobile-search__item--desc');
                  descDiv.innerHTML = result.item.content.substring(0, 150);
                }
              }
            }
            
            li.appendChild(titleDiv);
            if (descDiv) {
              li.appendChild(descDiv);
            }
            ul.appendChild(a);
          }
        });
      } else {
        var item = document.createElement('span');
        ul.appendChild(item);
      }

      let wrap = document.getElementById('search-mobile-results');
      while (wrap.firstChild) {
        wrap.removeChild(wrap.firstChild)
      }
      searchResults.appendChild(ul);
    }

    function generateHighlightedText(text, regions) {
      if (!regions) {
        return text;
      }

      var content = '', nextUnhighlightedRegionStartingIndex = 0;

      regions.forEach(function(region) {
        if (region[0] === region[1]) {
          return null;
        }
        
        content += '' +
          text.substring(nextUnhighlightedRegionStartingIndex, region[0]) +
          '<span class="search__highlight">' +
            text.substring(region[0], region[1] + 1) +
          '</span>' +
        '';
        nextUnhighlightedRegionStartingIndex = region[1] + 1;
      });

      content += text.substring(nextUnhighlightedRegionStartingIndex);

      return content;
    };

    var searchElem = document.getElementById('search');
    var searchMobile = document.getElementById('search-mobile');
    var searchResultsContainer = document.getElementById('search-results');

    searchElem ?
    searchElem.addEventListener('input', function(e) {
      if (!e.target.value | window.innerWidth < 770) {
        searchResultsContainer ? searchResultsContainer.setAttribute('class', 'dropdown') : null;
        searchResult ? searchResult.setAttribute('data-display', 'none') : null;
        summaryContainer ? summaryContainer.setAttribute('data-display', 'block') : null;
        return null;
      }

      searchText = e.target.value;
      var results = fuse.search(e.target.value);
      
      if (searchResultPosition === "main") {
        if (enableSearchHighlight) {
          renderSearchHighlightResultsMain(searchText, results);
        } else {
          renderSearchResultsMain(searchText, results);
        }
      } else {
        if (enableSearchHighlight) {
          renderSearchHighlightResultsSide(searchText, results);
        } else {
          renderSearchResultsSide(searchText, results);
        }
        
        var dropdownItems = searchResultsContainer.querySelectorAll('.dropdown-item');
        dropdownItems ? dropdownItems.forEach(function(item) {
          item.addEventListener('mousedown', function(e) {
            e.target.click();
          });
        }) : null;
      }
    }) : null;

    searchElem ? 
    searchElem.addEventListener('blur', function() {
      if (window.innerWidth < 770) {
        return null;
      }
      searchResultsContainer ? searchResultsContainer.setAttribute('class', 'dropdown') : null;
    }) : null;

    searchElem ? 
    searchElem.addEventListener('click', function(e) {
      if (window.innerWidth < 770) {
        return null;
      }
      if (!e.target.value) {
        searchResultsContainer ? searchResultsContainer.setAttribute('class', 'dropdown') : null;
        return null;
      }

      searchText = e.target.value;
      var results = fuse.search(e.target.value);

      if (searchResultPosition === "main") {
        if (enableSearchHighlight) {
          renderSearchHighlightResultsMain(searchText, results);
        } else {
          renderSearchResultsMain(searchText, results);
        }
      } else{
        if (enableSearchHighlight) {
          renderSearchHighlightResultsSide(searchText, results);
        } else {
          renderSearchResultsSide(searchText, results);
        }

        var dropdownItems = searchResultsContainer.querySelectorAll('.dropdown-item');
        dropdownItems ? dropdownItems.forEach(function (item) {
          item.addEventListener('mousedown', function (e) {
            e.target.click();
          });
        }) : null;
      }
    }) : null;

    var searchMenuElem = document.getElementById("search-menu");
    var activeItem = document.querySelector('#search-menu .dropdown-item.is-active');
    var activeIndex = null;
    var items = null;
    var searchContainerMaxHeight = 350;

    searchElem ? 
    searchElem.addEventListener('keydown', function(e) {
      if (window.innerWidth < 770) {
        return null;
      }

      if (e.key === 'Escape') {
        searchResult ? searchResult.setAttribute('data-display', 'none') : null;
        summaryContainer ? summaryContainer.setAttribute('data-display', 'block') : null;
      }

      var items = document.querySelectorAll('#search-menu .dropdown-item');
      var keyCode = e.which || e.keyCode;

      if (!items || !items.length) {
        return null;
      }
      
      if (e.key === 'ArrowDown' || keyCode === 40) {
        if (activeIndex === null) {
          activeIndex = 0;
          items[activeIndex].classList.remove('is-active');
        } else {
          items[activeIndex].classList.remove('is-active');
          activeIndex = activeIndex === items.length - 1 ? 0 : activeIndex + 1;
        }
        items[activeIndex].classList.add('is-active');

        let overflowedPixel = items[activeIndex].offsetTop + items[activeIndex].clientHeight - searchContainerMaxHeight;
        if (overflowedPixel > 0) {
          document.querySelector(".search-content").scrollTop += items[activeIndex].getBoundingClientRect().height;
        } else if (activeIndex === 0) {
          document.querySelector(".search-content").scrollTop = 0;
        }
      } else if (e.key === 'ArrowUp' || keyCode === 38) {
        if (activeIndex === null) {
          activeIndex = items.length - 1;
          items[activeIndex].classList.remove('is-active');
        } else {
          items[activeIndex].classList.remove('is-active');
          activeIndex = activeIndex === 0 ? items.length - 1 : activeIndex - 1;
        }
        items[activeIndex].classList.add('is-active');
        
        let overflowedPixel = items[activeIndex].offsetTop + items[activeIndex].clientHeight - searchContainerMaxHeight;
        if (overflowedPixel < 0) {
          document.querySelector(".search-content").scrollTop -= items[activeIndex].getBoundingClientRect().height;
        } else {
          document.querySelector(".search-content").scrollTop = overflowedPixel + items[activeIndex].getBoundingClientRect().height;
        }
      } else if (e.key === 'Enter' || keyCode === 13) {
        if (items[activeIndex] && items[activeIndex].getAttribute('href')) {
          location.href = items[activeIndex].getAttribute('href');
        }
      } else if (e.key === 'Escape' || keyCode === 27) {
        e.target.value = null;
        if (searchResults) {
          searchResults.classList.remove('is-active');
        }
      }
    }) : null;

    searchMobile ? 
    searchMobile.addEventListener('input', function(e) {
      if (!e.target.value) {
        let wrap = document.getElementById('search-mobile-results');
        while (wrap.firstChild) {
          wrap.removeChild(wrap.firstChild);
        }
        return null;
      }

      searchText = e.target.value;
      var results = fuse.search(e.target.value);
      renderSearchResultsMobile(searchText, results);
      if (enableSearchHighlight) {
        renderSearchHighlightResultsMobile(searchText, results);
      } else {
        renderSearchResultsMobile(searchText, results);
      }
    }) : null;
  


  
    var mobileSearchInputElem = document.querySelector('#search-mobile');
    var mobileSearchClassElem = document.querySelector('.mobile-search');
    var mobileSearchBtnElems = document.querySelectorAll('.navbar-search');
    var mobileSearchCloseBtnElem = document.querySelector('#search-mobile-close');
    var mobileSearchContainer = document.querySelector('#search-mobile-container');
    var mobileSearchResultsElem = document.querySelector('#search-mobile-results');
    var htmlElem = document.querySelector('html');

    if (mobileSearchClassElem) {
      mobileSearchClassElem.style.display = 'none';
    }

    mobileSearchBtnElems ? 
    mobileSearchBtnElems.forEach(function (elem, idx) {
      elem.addEventListener('click', function () {
        if (mobileSearchContainer) {
          mobileSearchContainer.style.display = 'block';
        }

        if (mobileSearchInputElem) {
          mobileSearchInputElem.focus();
        }

        if (htmlElem) {
          htmlElem.style.overflowY = 'hidden';
        }
      });
    }) : null;

    mobileSearchCloseBtnElem ? 
    mobileSearchCloseBtnElem.addEventListener('click', function() {
      if (mobileSearchContainer) {
        mobileSearchContainer.style.display = 'none';
      }

      if (mobileSearchInputElem) {
        mobileSearchInputElem.value = '';
      }
      
      if (mobileSearchResultsElem) {
        while (mobileSearchResultsElem.firstChild) {
          mobileSearchResultsElem.removeChild(mobileSearchResultsElem.firstChild);
        }
      }

      if (htmlElem) {
        htmlElem.style.overflowY = 'visible';
      }
    }) : null;

    mobileSearchInputElem ?
    mobileSearchInputElem.addEventListener('keydown', function(e) {
      var keyCode = e.which || e.keyCode;
      if (e.key === 'Escape' || keyCode === 27) {
        if (mobileSearchContainer) {
          mobileSearchContainer.style.display = 'none';
        }
        
        if (mobileSearchInputElem) {
          mobileSearchInputElem.value = '';
        }

        if (mobileSearchResultsElem) {
          while (mobileSearchResultsElem.firstChild) {
            mobileSearchResultsElem.removeChild(mobileSearchResultsElem.firstChild);
          }
        }
        if (htmlElem) {
          htmlElem.style.overflowY = 'visible';
        }
      }
    }) : null;
  


  
    function renderSearchResultsMain(searchText, results) {
      var searchBody = document.querySelector('.search-result__body');
      var originUl = searchBody.querySelector('ul');
      var ul = document.createElement('ul');
      
      if (!searchText) {
        searchResult ? searchResult.setAttribute('data-display', 'none') : null;
        summaryContainer ? summaryContainer.setAttribute('data-display', 'block') : null;
      } else if (results) {
        if (results && results.length) {
          results.forEach(function (result) {
            makeLi(ul, result);
          });

          searchResult ? searchResult.setAttribute('data-display', 'block') : null;
          summaryContainer ? summaryContainer.setAttribute('data-display', 'none') : null;
        }
      }

      originUl.parentNode.replaceChild(ul, originUl);
    }

    function renderSearchHighlightResultsMain(searchText, results) {
      var searchBody = document.querySelector('.search-result__body');
      var originUl = searchBody.querySelector('ul');
      var ul = document.createElement('ul');

      if (!searchText) {
        searchResult ? searchResult.setAttribute('data-display', 'none') : null;
        summaryContainer ? summaryContainer.setAttribute('data-display', 'block') : null;
      } else if (results) {
        if (results && results.length) {
          results.forEach(function (result) {
            makeHighlightLi(ul, result);
          });

          searchResult ? searchResult.setAttribute('data-display', 'block') : null;
          summaryContainer ? summaryContainer.setAttribute('data-display', 'none') : null;
        }
      }

      originUl.parentNode.replaceChild(ul, originUl);
    }
  
  });
</script>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <meta name="generator" content="Hugo 0.78.1" />
  <link rel="canonical" href="https://suberpower.com/20180310x250-linux-install/">

  

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#000000">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" type="text/css" href="https://suberpower.com/css/paper.css">

  
  
  <link rel="stylesheet" type="text/css" href="https://suberpower.com/css/custom.css">

  
  
  <title>X250 Linux install | Suberpower</title>
</head>
  <body>
    <div class="container paper">
      <nav class="border split-nav">
  <div class="nav-brand">
    <h3><a href="/">Suberpower</a></h3>
  </div>
  <div class="collapsible">
    <input id="collapsible1" type="checkbox" name="collapsible1">
    <button>
    <label for="collapsible1">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
      </label>
    </button>
    <div class="collapsible-body">
      <ul class="inline">
      
        <li><a href="/repo/">🗃️ Repo</a></li>
      
        <li><a href="/about/">㊙️ About</a></li>
      
        <li><a href="/tags/">🏷️ Tags</a></li>
      
        <li><a href="/contact/">✉️ Contact</a></li>
      
      </ul>
    </div>
  </div>
</nav>
      <main>
        

<h1 class="post-title">X250 Linux install</h1>


<strong>Publish date: </strong>10 Mar, 2018
<br>

  <strong>Tags: </strong>
  
    <a href="https://suberpower.com/tags/linux">linux</a>
  
    <a href="https://suberpower.com/tags/thinkpad">thinkpad</a>
  



  

<div class="child-borders">
  <div class="toc border" aria-labelledby="toc-heading">
    <h2 id="toc-heading">Table of contents</h2>
    <ol>
      
        <li>
          
          
          
          
          <a href="#download-install-media">
            Download install media
          </a>
        </li>
      
        <li>
          
          
          
          
          <a href="#boot-install-media">
            Boot install media
          </a>
        </li>
      
        <li>
          
          
          
          
          <a href="#setup-network-connection">
            Setup network connection
          </a>
        </li>
      
        <li>
          
          
          
          
          <a href="#filesystem">
            Filesystem
          </a>
        </li>
      
        <li>
          
          
          
          
          <a href="#prepare-for-chroot">
            Prepare for chroot
          </a>
        </li>
      
        <li>
          
          
          
          
          <a href="#setup-base-system">
            Setup base system
          </a>
        </li>
      
        <li>
          
          
          
          
          <a href="#finalize-installation">
            Finalize installation
          </a>
        </li>
      
    </ol>
  </div>
</div>



<p>This machine in 12” 4:3 aspect ratio is great to have on the side, literally. The TN-panel looks awful in picture but is actually good enough to work in terminal environments. The classis 7-row keyboard gives this machine it’s right to exist eternally. I’ve decided to install Void Linux, the musl edition. Here are my notes to guide trough the setup process on the ThinkPad X61!</p>
<blockquote>
<p>musl is a new standard library to power a new generation of Linux-based devices. It is lightweight, fast, simple, free, and strives to be correct in the sense of standards-conformance and safety.</p>
<p>–Void Linux</p>
</blockquote>
<h2 id="download-install-media">Download install media</h2>
<p>First download the <code>void-live-x86_64-musl-20181011.iso</code> current release, <code>sha256sums.txt</code>, <code>sha256sums.txt.sig</code> and verify the image:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ wget https://alpha.de.repo.voidlinux.org/live/current/void-live-x86_64-musl-20181111.iso
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ wget http://alpha.de.repo.voidlinux.org/live/current/sha256sums.txt<span style="color:#f92672">{</span>,.sig<span style="color:#f92672">}</span>
</code></pre></div><h3 id="verify-image-integrity">Verify image integrity</h3>
<p>Verify the integrity of these files using <a href="https://www.gnu.org/software/coreutils/manual/html_node/sha1sum-invocation.html#sha1sum-invocation/">sha256sum</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ sha256sum -c --ignore-missing sha256sums.txt void-live-x86_64-musl-20181111.iso
void-live-x86_64-musl-20181111.iso: OK
</code></pre></div><p>The integrity check should return OK, which means we can proceed using this .iso Image file. In all other cases, the file can be corrupt or has been modified. Don’t use it, change to tier 1 mirrors and re-download instead.</p>
<h3 id="verify-image-authenticity">Verify image authenticity</h3>
<p>The <code>sha256sums.txt</code> file is published and digitally signed by the Void Linux maintainers with the Void Images key:</p>
<ul>
<li>Signer: Void Linux Image Signing Key <code>images@voidlinux.eu</code></li>
<li>KeyID: <code>B48282A4</code></li>
<li>Fingerprint: <code>CF24 B9C0 3809 7D8A 4495 8E2C 8DEB DA68 B482 82A4</code></li>
</ul>
<p>To download this key:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ gpg --recv-keys B48282A4
gpg: requesting key B48282A4 from hkp server keys.gnupg.net
gpg: key B48282A4: public key <span style="color:#e6db74">&#34;Void Linux Image Signing Key &lt;images@voidlinux.eu&gt;&#34;</span> imported
gpg: no ultimately trusted keys found
gpg: Total number processed: <span style="color:#ae81ff">1</span>
gpg:               imported: <span style="color:#ae81ff">1</span>  <span style="color:#f92672">(</span>RSA: 1<span style="color:#f92672">)</span>
</code></pre></div><p>Use this key to verify the signature of <code>sha256sums.txt</code> in <code>sha256sums.txt.sig</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ gpg --verify sha256sums.txt.sig
gpg: assuming signed data in <span style="color:#e6db74">&#39;sha256sums.txt&#39;</span>
gpg: Signature made Sun <span style="color:#ae81ff">18</span> Nov <span style="color:#ae81ff">2018</span> 11:39:33 PM CET
gpg:                using RSA key CF24B9C038097D8A44958E2C8DEBDA68B48282A4
gpg: Good signature from <span style="color:#e6db74">&#34;Void Linux Image Signing Key &lt;images@voidlinux.eu&gt;&#34;</span> <span style="color:#f92672">[</span>expired<span style="color:#f92672">]</span>
gpg: Note: This key has expired!
Primary key fingerprint: CF24 B9C0 <span style="color:#ae81ff">3809</span> 7D8A <span style="color:#ae81ff">4495</span>  8E2C 8DEB DA68 B482 82A4
</code></pre></div><p>The signature for the checksums is authentic. The hash is valid for the Void Image file. We can proceed to create the installation media. This could either be a USB drive or SD card.</p>
<h3 id="prepare-install-media">Prepare install media</h3>
<p>Write the image file to bootable media. First identify the device you’ll write to using <a href="https://www.gnu.org/software/fdisk/#introduction/">fdisk</a>. Make sure it’s plugged in already.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ fdisk -l
Disk /dev/sdb: 28.99 GiB, <span style="color:#ae81ff">31104958464</span> bytes, <span style="color:#ae81ff">60751872</span> sectors
Disk model: Ultra Fit       
Units: sectors of <span style="color:#ae81ff">1</span> * 512 <span style="color:#f92672">=</span> <span style="color:#ae81ff">512</span> bytes
Sector size <span style="color:#f92672">(</span>logical/physical<span style="color:#f92672">)</span>: <span style="color:#ae81ff">512</span> bytes / <span style="color:#ae81ff">512</span> bytes
I/O size <span style="color:#f92672">(</span>minimum/optimal<span style="color:#f92672">)</span>: <span style="color:#ae81ff">512</span> bytes / <span style="color:#ae81ff">512</span> bytes
</code></pre></div><p>The output shows my USB-flashdrive as <code>/dev/sdb</code>. In linux, the path to the device will typically be in this form: <code>/dev/sdX</code> for USB, <code>/dev/mmcblkX </code>for SD cards.</p>
<p>Ensure the correct state by using this command: <a href="https://www.gnu.org/software/libc/manual/html_node/Mount_002dUnmount_002dRemount.html/">umount</a>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ umount /dev/sdb
umount: /dev/sdb: not mounted.
</code></pre></div><h3 id="write-to-bootdrive">Write to bootdrive</h3>
<p>Write the image file to USB drive using <a href="https://www.gnu.org/software/coreutils/manual/html_node/dd-invocation.html#dd-invocation/">dd</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ dd bs<span style="color:#f92672">=</span>4M <span style="color:#66d9ef">if</span><span style="color:#f92672">=</span>~/void-live-x86_64-musl-20181111.iso of<span style="color:#f92672">=</span>/dev/sdb
86+1 records in
86+1 records out
<span style="color:#ae81ff">361758720</span> bytes <span style="color:#f92672">(</span><span style="color:#ae81ff">362</span> MB, <span style="color:#ae81ff">345</span> MiB<span style="color:#f92672">)</span> copied, 9.07791 s, 39.9 MB/s
</code></pre></div><p>Finally, flush all data with <code>sync</code>, unplug the installation media and give it a kiss:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ sync
</code></pre></div><h2 id="boot-install-media">Boot install media</h2>
<p>Plug in the USB-flashdrive when the X61 is <code>off</code> and turn it <code>on</code>. Hold <code>F12</code> to open “boot menu” and select <code>USB HDD</code>. Grub will show up. Select <code>Void Linux 4.18.17_1 x86_64-musl (RAM)</code> to load the entire image to RAM. Loading like so will take a bit more time but speed up the rest of the installation process.</p>
<p>We’ll be greeted by the void-live login prompt. Login with <code>root</code> using password <code>voidlinux</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">void-live login: root
Password:
Last login: Tue Aug <span style="color:#ae81ff">22</span> 06:35:54 on tty1
$ _
</code></pre></div><p>There is a GUI installer available and can be run with <code>void-installer</code>, but I&rsquo;ve skipped this for the sake of learning. To gain more understanding of the system, proceed with manual isntallation.</p>
<h2 id="setup-network-connection">Setup network connection</h2>
<p>The easiest way is to plug in the good old <code>RJ45</code>. The dhcpcd service is enabled by default. If using this, skip the configuration for wifi. We should be online by now, check connection with <a href="https://linux.die.net/man/8/ping/">ping</a> (use ctrl+c to exit)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ ping voidlinux.org
PING voidlinux.org <span style="color:#f92672">(</span>185.199.109.153<span style="color:#f92672">)</span> 56<span style="color:#f92672">(</span>84<span style="color:#f92672">)</span> bytes of data.
<span style="color:#ae81ff">64</span> bytes from 185.199.109.153 <span style="color:#f92672">(</span>185.199.109.153<span style="color:#f92672">)</span>: icmp_seq<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> ttl<span style="color:#f92672">=</span><span style="color:#ae81ff">57</span> time<span style="color:#f92672">=</span>14.1 ms
<span style="color:#ae81ff">64</span> bytes from 185.199.109.153 <span style="color:#f92672">(</span>185.199.109.153<span style="color:#f92672">)</span>: icmp_seq<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span> ttl<span style="color:#f92672">=</span><span style="color:#ae81ff">57</span> time<span style="color:#f92672">=</span>15.3 ms
<span style="color:#ae81ff">64</span> bytes from 185.199.109.153 <span style="color:#f92672">(</span>185.199.109.153<span style="color:#f92672">)</span>: icmp_seq<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span> ttl<span style="color:#f92672">=</span><span style="color:#ae81ff">57</span> time<span style="color:#f92672">=</span>17.3 ms
</code></pre></div><p>If neccesary, enable <code>dhcpcd</code> service manually using:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ ln -s /etc/sv/dhcpcd /var/service/
$
</code></pre></div><p>Now the service has been activated with no response. According to the UNIX <a href="https://homepage.cs.uri.edu/~thenry/resources/unix_art/ch01s06.html">philosophy</a>: “No news is good news”. Challenge this by verifying the current state:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ sv status dhcpcd
run: dhcpcd: <span style="color:#f92672">(</span>pid 916<span style="color:#f92672">)</span> 12s
</code></pre></div><h3 id="wifi-connection">Wifi connection</h3>
<p>Wireless connections are handled by the wpa_supplicant <a href="https://github.com/void-linux/void-packages/tree/master/srcpkgs/wpa_supplicant/">package</a>; it can at least handle WEP, <a href="https://en.wikipedia.org/wiki/Wi-Fi_Protected_Access/">WPA-PSK</a> (Personal) and WPA-EAP (Enterprise).</p>
<p>Modify <code>wpa_supplicant.conf</code> to match network device:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ wpa_passphrase <span style="color:#e6db74">&#39;My SSID&#39;</span> &gt;&gt; /etc/wpa_supplicant/wpa_supplicant.conf
my_wifi_password&lt;enter&gt;
$ sv restart dhcpcd
ok: run: dhcpcd: <span style="color:#f92672">(</span>pid 916<span style="color:#f92672">)</span> 0s
</code></pre></div><p>Give it approximately 12 seconds to connect, verify IP address and ping to ensure the internet connection is working. (wifi <code>interface_name</code> should start with <code>wls</code>)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ ip addr
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt;...
2: enp0: &lt;NO-CARRIER,BORADCAST,MULTICAST,UP&gt;...
3: wls3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span style="color:#ae81ff">1500</span> qdisc noqueue state UP mode DORMANT group default qlen <span style="color:#ae81ff">1000</span>
    link/ether 00:00:00:00:00:00 brd ff:ff:ff:ff:ff:ff
    inet 123.123.213.123/24 brd 123.123.123.255 scope global noprefixroute wls3
       valid_lft forever preferred_lft forever
    inet6 1234::1234:1234:1234:1234/64 scope link
       valid_lft forever preferred_lft forever
<span style="color:#75715e"># ping voidlinux.org</span>
PING voidlinux.org <span style="color:#f92672">(</span>185.199.109.153<span style="color:#f92672">)</span> 56<span style="color:#f92672">(</span>84<span style="color:#f92672">)</span> bytes of data...
</code></pre></div><h2 id="filesystem">Filesystem</h2>
<p>The BIOS shipped with is only supporting <a href="https://wiki.archlinux.org/index.php/GRUB#GUID_Partition_Table_(GPT)_specific_instructions/">legacy boot</a>. Due a <a href="https://docs.voidlinux.org/installation/live-images/partitions.html">DOS</a> partition table only supports 4 primary partitions, I prefer to go for a <a href="https://docs.voidlinux.org/installation/live-images/partitions.html">GUID</a> partition table. Creating a small MBR partition upfront will do the trick.</p>
<h3 id="swap-space">Swap space</h3>
<p>A <a href="https://www.kernel.org/doc/gorman/html/understand/understand014.html">swap</a> partition is not required but recommended for systems with low RAM. Since I have 2 GB RAM and plan to use hibernation, i’ll create a swap space 3x the RAM, a total of 6 GB. Set your swap space according to your preference.</p>
<h3 id="boot-partition">Boot partition</h3>
<p>A seperate <code>/boot</code> partition isn’t required but I choose to use a <code>/boot</code> partition to manage kernels manually. Each kernel image will take around 18 MB. I’ll create a subersized <code>/boot</code> partition so I don’t have to worry about space. 1 GB it will be. If you don’t plan to customize the Linux kernel, 200 MB should be sufficient (room for 3 kernels).</p>
<h3 id="root-partition">Root partition</h3>
<p>The last but not least is the root <code>/</code> partition. Void Linux will be installed here and it’s recommended to seperate your <code>/home</code> folder into another partition. This is for convenience when reistalling the system. Since i don’t prefer this method of recovery I will not seperate my <code>/home</code> folder. Again, your preference may vary.</p>
<h3 id="drive-encryption">Drive encryption</h3>
<p>A large part will be encrypted. I left the boot partition open because i might change the bootloader later on. Swap and root will be encrypted as one, so create one partition and split them up after.</p>
<h3 id="create-filesystem">Create filesystem</h3>
<p>First set the hard drive into parts, than encrypt the relevant partitions and filesystem.</p>
<p>Consider to erase ALL data first to start clean. The point of doing so is to make any previous data unrecoverable, so it’s unlikely you’ll be able to recover any date in case you’ve wiped the wrong disk.</p>
<blockquote>
<p>Please pay attention here. I&rsquo;ve lost date before, because I didn&rsquo;t :P</p>
</blockquote>
<h3 id="wipe-the-correct-disk">Wipe the correct disk</h3>
<p>To see all available disks, use <code>lsblk</code>. The disk named <code>sda</code> is the target disk in my case. There is no way back after the <code>enter</code> button has been pressed.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ lsblk
NAME      WAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
loop0         7:0  <span style="color:#ae81ff">0</span> 257.1M  <span style="color:#ae81ff">1</span> loop
loop1         7:1  <span style="color:#ae81ff">0</span>   618M  <span style="color:#ae81ff">1</span> loop 
|-live-rw   254:0  <span style="color:#ae81ff">0</span>   618M  <span style="color:#ae81ff">0</span> dm   /
|-live-base 254:1  <span style="color:#ae81ff">0</span>   618M  <span style="color:#ae81ff">1</span> dm
loop2         7:2  <span style="color:#ae81ff">0</span>    32G  <span style="color:#ae81ff">0</span> loop
|-live-rw   254:0  <span style="color:#ae81ff">0</span>   618M  <span style="color:#ae81ff">0</span> dm   /
sda           8:0  <span style="color:#ae81ff">0</span> 149.1G  <span style="color:#ae81ff">0</span> disk
sdb          8:16  <span style="color:#ae81ff">1</span>    29G  <span style="color:#ae81ff">0</span> disk
|-sdb1       8:17  <span style="color:#ae81ff">1</span>   345M  <span style="color:#ae81ff">0</span> part /run/initramfs/live
|-sdb2       8:18  <span style="color:#ae81ff">1</span>    32M  <span style="color:#ae81ff">0</span> part
$ dd <span style="color:#66d9ef">if</span><span style="color:#f92672">=</span>/dev/urandom of<span style="color:#f92672">=</span>/dev/sda
_
</code></pre></div><p>This process takes <strong>hours</strong>, depending on the size of your disk.</p>
<h3 id="create-partitions">Create partitions</h3>
<p>Seperate the disk into parts. I’ve planned to use three partitions:</p>
<ul>
<li><code>/boot</code></li>
<li><code>swap</code></li>
<li><code>/</code></li>
</ul>
<p>Due to <code>swap</code> and <code>/</code> will encrypted as one partition, create one for both and split them up afterwards.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ cfdisk -z /dev/sda
</code></pre></div><p>#links_toevoegen#
You’ll be prompted to select a label type, select gpt. To be able to actually boot this system we need a small MBR partition. Create the MBR partition by selecting New, define Partition size: 1M and change the type to BIOS boot.</p>
<p>Select New for the second partition, define Partition size: 1G and change the type to EFI System.</p>
<p>Create the third partition for swap and / combined. We will seperate them in logical volume after the partition has been encrypted. Since I plan 6G Swap space and 55G for /, I select New, Partition size: 61G, Type Linux filesystem.</p>
<p>The third partition is basically the space appointed to use in Linux. You can decide to use up remaining space or leave Free space for later, for example dual-boot.</p>
<p>Double check your table and to wriite it to disk, select Write.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">Are you sure you want to write the partition table to disk? _
</code></pre></div><p>type yes and hit enter with confidence. Select Quit to exit.</p>
<p>Use lsblk and notice the two parts that have been created:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">sda          8:0   <span style="color:#ae81ff">0</span> 149.1G  <span style="color:#ae81ff">0</span> disk
|-sda1       8:1   <span style="color:#ae81ff">1</span>     1M  <span style="color:#ae81ff">0</span> part 
|-sda2       8:2   <span style="color:#ae81ff">1</span>     1G  <span style="color:#ae81ff">0</span> part
|-sda3       8:3   <span style="color:#ae81ff">1</span>    61G  <span style="color:#ae81ff">0</span> part
sdb          8:16  <span style="color:#ae81ff">1</span>    29G  <span style="color:#ae81ff">0</span> disk
|-sdb1       8:17  <span style="color:#ae81ff">1</span>   345M  <span style="color:#ae81ff">0</span> part /run/initramfs/live
|-sdb2       8:18  <span style="color:#ae81ff">1</span>    32M  <span style="color:#ae81ff">0</span> part
</code></pre></div><p>Setup filesystem for /dev/sda2, use ext2and label it as boot:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ mkfs.ext2 -L boot /dev/sda2
</code></pre></div><h3 id="encrypt">Encrypt</h3>
<p>Setup encryption with LUKS and create the system volumes within.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ cryptsetup luksFormat /dev/sda3
WARNING!
<span style="color:#f92672">========</span>
This will overwrite data on /dev/sda3 irrevocably.
Are you sure? <span style="color:#f92672">(</span>Type uppercase yes<span style="color:#f92672">)</span> YES
Enter passphrase <span style="color:#66d9ef">for</span> /dev/sda2:
Verify passphrase:
</code></pre></div><p>Decrypt sda3 and name the drive to void, voidlinux or hunnybunny.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ cryptsetup luksOpen /dev/sda3 hunnybunny
Enter passphrase <span style="color:#66d9ef">for</span> /dev/sda3:
</code></pre></div><p>Create a volume group within.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ vgcreate voidlinux /dev/mapper/hunnybunny
Physical volume <span style="color:#e6db74">&#34;/dev/mapper/hunnybunny&#34;</span> succesfully created.
Volume group <span style="color:#e6db74">&#34;voidlinux&#34;</span> successfully created.
</code></pre></div><p>Create a logical volume for swap and another for /</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ lvcreate --name swap -L 6GB voidlinux
Logical volume <span style="color:#e6db74">&#34;swap&#34;</span> created.
$ lvcreate --name root -l 100%free voidlinux
Logical volume <span style="color:#e6db74">&#34;root&#34;</span> created.
</code></pre></div><p>Give / a filesystem, i chose btrfs:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ mkfs.btrfs -L root /dev/voidlnux/root
...
Devices:
   ID     SIZE PATH
    <span style="color:#ae81ff">1</span> 55.00GiB /dev/voidlinux/root
</code></pre></div><h2 id="prepare-for-chroot">Prepare for chroot</h2>
<p>Almost ready for installation. We need to mount the partitions so they become accessable.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ mount /dev/voidlinux/root /mnt
$ mkdir /mnt/boot
$ mount /dev/sda1 /mnt/boot
$ mkswap /dev/voidlinux/swap
Setting up swapspace version 1, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span> GiB <span style="color:#f92672">(</span><span style="color:#ae81ff">6442446848</span> bytes<span style="color:#f92672">)</span>
no label. UUID<span style="color:#f92672">=</span>hunny-bunny-swap-hunny-bunny-swap
</code></pre></div><h3 id="double-check-mountpoints">Double check mountpoints</h3>
<p>Make sure you work with correct mountpoints. In my case the output of lsblk should be:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">sda                      8:0   <span style="color:#ae81ff">0</span> 149.1G  <span style="color:#ae81ff">0</span> disk
|-sda1                   8:1   <span style="color:#ae81ff">0</span>     1M  <span style="color:#ae81ff">0</span> part  <span style="color:#f92672">[</span>MBR<span style="color:#f92672">]</span> 
|-sda2                   8:2   <span style="color:#ae81ff">0</span>     1G  <span style="color:#ae81ff">0</span> part  /mnt/boot 
|-sda3                   8:3   <span style="color:#ae81ff">0</span>    61G  <span style="color:#ae81ff">0</span> part 
   |-hunnybunny        254:2   <span style="color:#ae81ff">0</span>    61G  <span style="color:#ae81ff">0</span> crypt
      |-voidlinux-swap 254:3   <span style="color:#ae81ff">0</span>     6G  <span style="color:#ae81ff">0</span> lvm   <span style="color:#f92672">[</span>SWAP<span style="color:#f92672">]</span>
      |-voidlinux-root 254:4   <span style="color:#ae81ff">0</span>    55G  <span style="color:#ae81ff">0</span> lvm   /mnt
sdb                      8:16  <span style="color:#ae81ff">1</span>    29G  <span style="color:#ae81ff">0</span> disk
|-sdb1                   8:17  <span style="color:#ae81ff">1</span>   345M  <span style="color:#ae81ff">0</span> part  /run/initramfs/live
|-sdb2                   8:18  <span style="color:#ae81ff">1</span>    32M  <span style="color:#ae81ff">0</span> part
</code></pre></div><h3 id="install-base-system">Install base system</h3>
<p>Instruct xbps to work with the correct folders.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ <span style="color:#66d9ef">for</span> dir in dev proc sys; <span style="color:#66d9ef">do</span> mkdir /mnt/$dir; mount --rbind /$dir /mnt/$dir; <span style="color:#66d9ef">done</span>
_
</code></pre></div><p>It’s time to install the base system and the very neccesary packages: cryptsetup,lvm2, grub. Feel free to add other packages for installation. I’ve added vim. Go for one of the two options.</p>
<blockquote>
<p>Option 1: To install with current packages:</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ export XBPS_ARCH<span style="color:#f92672">=</span>x86_64-musl <span style="color:#f92672">&amp;&amp;</span> xbps-install -S -R https://alpha.de.repo.voidlinux.org/current/musl -r /mnt base-system lvm2 cryptosetup grub vim
</code></pre></div><blockquote>
<p>Option 2: To install with Installation media packages:</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ xbps-install -Sy -r /mnt base-system lvm2 cryptsetup grub vim
</code></pre></div><p>Now we can finally proceed with chroot wootwoot! It means that we can change to / and claim ownership.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ chroot /mnt /bin/bash
$ chown root:root /
$ chmod <span style="color:#ae81ff">755</span> /
$ passwd root
New password:
Retype new password:
passwd: password updated successfully
</code></pre></div><h2 id="setup-base-system">Setup base system</h2>
<p>We need to setup the base system and configure grub to succesfully boot into system hereafter.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ echo x61 &gt; /etc/hostname
</code></pre></div><h3 id="filesystem-table">Filesystem table</h3>
<p>We need to add our partitions to this table fstab. If you haven’t installed vim before, you can use vi.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ vim /etc/fstab
</code></pre></div><p>After editing my fstab looks like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ See fstab<span style="color:#f92672">(</span>5<span style="color:#f92672">)</span>.
$
$ &lt;file system&gt;     &lt;dir&gt; &lt;type&gt; &lt;options&gt;             &lt;dump&gt; &lt;pass&gt;
tmpfs               /tmp  tmpfs  defaults,nosuid,nodev <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>
/dev/sda2           /boot ext2   defaults              <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>
/dev/voidlinux/swap swap  swap   defaults              <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>
/dev/voidlinux/root /     btrfs  defaults              <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>
</code></pre></div><h3 id="universally-unique-id">Universally Unique Id</h3>
<p>Use this command to find the root partition / UUID and write it to grub.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ blkid |grep /dev/sda3 &gt;&gt; /etc/default/grub
</code></pre></div><h3 id="grub">GRUB</h3>
<p>Configure GRUB bootoptions to appoint to /dev/sda3 as target disk for boot.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ vim /etc/default/grub
</code></pre></div><p>We have written the UUID to easily append rd.auto=1 cryptdevice=UUID=123a123a-123a-123a-132a123b:lvm within the double quotes to this line GRUB_CMDLINE_LINUX_DEFAULT=</p>
<p>Enable decryption at boot by adding GRUB_ENABLE_CRYPTODISK=y.</p>
<p>Thes two lines under GRUB_DISTRIBUTOR will now look like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">...
GRUB_DISTRIBUTOR<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;hunnybunny&#34;</span>
GRUB_CMDLINE_LINUX_DEFAULT<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;loglevel=4 slub_debug=P page_poison=1 rd.auto=1 cryptdevice=UUID=123a123a-123a-123a-132a123b:lvm&#34;</span>
GRUB_ENABLE_CRYPTODISK<span style="color:#f92672">=</span>y
...
</code></pre></div><h3 id="protected-file-key">Protected file key</h3>
<p>The ThinkPad X61 doesn’t support UEFI by default. It’s a pity that we cannot use a predefined key to decrypt the system volume. We need to enter the encryption password at boot. If you have custom BIOS with UEFI enabled, proceed to make the key. Create volume.key and add it to /etc/crypttab</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ dd bs<span style="color:#f92672">=</span><span style="color:#ae81ff">512</span> count<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span> <span style="color:#66d9ef">if</span><span style="color:#f92672">=</span>/dev/urandom of<span style="color:#f92672">=</span>/boot/volume.key
4+0 records in
4+0 records out
<span style="color:#ae81ff">2048</span> bytes <span style="color:#f92672">(</span>2.0 kB, 2.0 KiB<span style="color:#f92672">)</span> copied, 0.00352824 s, <span style="color:#ae81ff">580</span> kB/s
$ cryptsetup luksAddKey /dev/sda2 /boot/volume.key
Enter any existing passphrase:
$ chmod <span style="color:#ae81ff">000</span> /boot/volume.key
$ chmod -R g-rwx,o-rwx /boot
</code></pre></div><p>Add key to /etc/crypttab.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">echo hunnybunny /dev/sda2/ /boot/volume.key luks &gt;&gt; /etc/crypttab
</code></pre></div><p>Include the volume.key and crypttab to have it loaded toghether with kernel modules.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ cat /etc/dracut.conf.d/10-crypt.conf
install_items<span style="color:#f92672">+=</span><span style="color:#e6db74">&#34; /boot/volume.key /etc/crypttab &#34;</span>
</code></pre></div><h2 id="finalize-installation">Finalize installation</h2>
<p>The boot has been setup by now. Finalize the installation by installing Grub and reconfigure the package manager by selecting the kernel of choice.</p>
<h3 id="install-grub">Install Grub</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ grub-install /dev/sda3
Installing <span style="color:#66d9ef">for</span> i386-pc platform.
Installation finished. No error reported.
</code></pre></div><h3 id="reconfigure-xbps">Reconfigure xbps</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ xbps-reconfigure -f linux5.2
linux5.2: configuring ...
Executing post-install kernel hook: 20-dracut ...
Executing post-install kernel hook: 50-grub ...
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-5.2.17_1
Found initrd image: /boot/initramfs-5.2.17_1.img
<span style="color:#66d9ef">done</span>
linux5.2: configured successfully.
</code></pre></div><h3 id="unplug-and-reboot">Unplug and reboot!</h3>
<p>Unplug USB-flashdrive and reboot! If everything went right, the computer will restart to boot into Void Linux. Good job!</p>




      </main><br><br>
      <br>
<nav class="border split-nav">
  <div class="nav-brand">
    <h3><a href="#">🔝</a></h3>
  </div>
  <div class="collapsible">
    <input id="collapsible1" type="checkbox" name="collapsible1">
    <button>
    <label for="collapsible1">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
      </label>
    </button>
    <div class="collapsible-body">
      <ul class="inline">
      
        <li><a href="/hr/">💼 Job</a></li>
      
        <li><a href="/about/">㊙️ About</a></li>
      
        <li><a href="/tags/">🏷️ Tags</a></li>
      
        <li><a href="/index.xml/">📶 rss</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<br><center>2020 &copy; all rights reserved
  <br> Suberpower.com 💯</center>

      
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-177356733-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  </div>
  </body>
</html>